// Custom Explorer styles with TOC header support
@use "../quartz/styles/variables.scss" as *;
@import "../quartz/components/styles/explorer.scss";

.explorer {
  // Fix alignment for files without TOC - they need left margin to align with folder text
  li:has(> a) {
    > a {
      margin-left: 17px; // Account for folder icon width (12px) + margin-right (5px)
    }
  }
  // Header links styling - match stock TOC behavior
  .header-link {
    font-style: italic !important;
    font-weight: normal !important;
    font-size: 0.8em;
    color: var(--dark) !important;
    opacity: 0.35; // Start dimmed like stock TOC
    transition: 0.5s ease opacity, 0.3s ease color;

    // When scrolled into view (matches stock TOC)
    &.in-view {
      opacity: 0.75;
    }

    &:hover {
      opacity: 1 !important;
      color: var(--secondary) !important;
    }

    // Remove default indentation since folder structure handles nesting
    // The folder templates provide the visual hierarchy
  }

  // Ensure header folder icons are styled like regular folder icons
  .folder-container:has(.header-link) {
    .folder-icon {
      opacity: 0.7; // Slightly dimmed for headers
    }
  }

  // Style differentiation between physical folders, physical files, and headers
  .physical-folder {
    color: var(--secondary) !important; // Blue text for physical folders
    font-weight: 600;
    font-style: normal;
  }

  .physical-file,
  .file-title,
  .folder-title {
    // font-size: 0.95rem !important;
    font-weight: 600 !important;
    font-style: normal !important;
    line-height: 1.5rem !important;
    font-family: var(--headerFont);  // 'Inter', 'Segoe UI', 'Arial', sans-serif !important;
  }

  .folder-title {
    font-size: 0.95rem !important;
    // font-weight: 600 !important;
    // font-style: normal !important;
    // line-height: 1.5rem !important;
  }

  .physical-file,
  .file-title {
    font-size: 0.90rem !important;
    // font-weight: 600 !important;
    // font-style: normal !important;
    // line-height: 1.5rem !important;
  }

  .physical-file {
    color: #fff;
    opacity: 1;
    transition: color 0.3s;
  }

  .physical-file.active {
    color: var(--tertiary); /* Cyan for active page */
  }

  .header-folder {
    // Header folders should not use the blue folder color
    // They inherit from header-link styling (italic, dimmed)
    color: var(--dark) !important;
  }
}

// Dark mode adjustments
@media (prefers-color-scheme: dark) {
  .explorer {
    .file-headers {
      border-left-color: var(--gray);

      .header-link {
        color: var(--lightgray);

        &:hover {
          background-color: var(--darkgray);
          color: var(--light);
        }
      }
    }

  }
}

// Mobile responsive adjustments
@media all and ($mobile) {
  .explorer {
    .file-headers {
      margin-left: 12px;

      .header-item {
        .header-link {
          font-size: 0.8em;
          padding: 1px 6px;
        }

        &.header-depth-0 .header-link { padding-left: 6px; }
        &.header-depth-1 .header-link { padding-left: 12px; }
        &.header-depth-2 .header-link { padding-left: 18px; }
        &.header-depth-3 .header-link { padding-left: 24px; }
        &.header-depth-4 .header-link { padding-left: 30px; }
        &.header-depth-5 .header-link { padding-left: 36px; }
      }
    }

    .header-toggle {
      svg {
        width: 8px;
        height: 8px;
      }
    }
  }
}
